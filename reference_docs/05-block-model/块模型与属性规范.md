# 块模型与属性规范

- 适用版本：SiYuan `v3.5.7`
- 最后核对：2026-02-21
- 稳定性：stable
- 权威来源：
  - <https://github.com/siyuan-community/siyuan-developer-docs/tree/main/docs/zh-Hans/reference/block>
  - <https://github.com/siyuan-note/siyuan/blob/master/API_zh_CN.md>

## 1. 常见块类型

- `d`：文档块
- `h`：标题块（`h1`...`h6`）
- `p`：段落块
- `l` / `i`：列表与列表项
- `c`：代码块
- `m`：公式块
- `t`：表格块
- `query_embed`：嵌入块
- `av`：属性视图块

## 1.1 体系概览与映射

块类型存在两套表达：

- 前端 DOM 使用 `data-type` / `data-subtype`
- 数据库使用 `blocks.type` / `blocks.subtype`

建议在业务中统一抽象成“类型映射层”，并在代码中只使用一种规范。完整映射表见：

- `reference/05-block-model/块类型详表-Node与DB映射.md`

## 2. 属性类型

### 系统属性

- `id`、`updated`、`type` 等系统字段

### 自定义属性

- 必须使用 `custom-` 前缀
- 通过 `/api/attr/setBlockAttrs` 写入

示例：

```json
{
  "id": "20210912214605-uhi5gco",
  "attrs": {
    "custom-status": "done"
  }
}
```

## 3. 典型属性项

- `custom-dailynote-yyyymmdd`：日记标识
- `custom-sy-readonly`：只读控制（按业务谨慎使用）
- `custom-avs`：与属性视图相关的扩展数据（按版本核对）

完整属性清单与适用范围见：

- `reference/05-block-model/块属性清单与使用建议.md`

## 4. 实践建议

- 属性仅存必要业务状态，不存大体量正文
- 自定义属性键名保持命名空间，避免冲突
- 对外部依赖属性（主题/插件）先判空再使用

## 5. 本章如何使用

- 设计数据模型时先选“块内容”还是“块属性”
- 需要跨块查询时结合 SQL 与属性字段
- 排查兼容问题时优先检查 `custom-*` 命名冲突
